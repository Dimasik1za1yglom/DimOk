# Социальная сеть DimOk

### Цели проекта
Сущности: Администратор и Пользователь.

**Функционал пользователя:**
1) Регистрация/вход
2) Редактирование личной информации
3) Поиск других пользователей
4) Обмен сообщениями с другими пользователями
5) Просмотр страницы другого пользователя
6) Создание/просмотр записей у себя на странице

**Функционал администратора:**
1) Аналогично функционалу пользователя
2) Изменение/удаление любого пользователя
3) Получение данных по истории запросов поиска
4) Получение всех пользователей и возможность написание личного сообщения каждому
___
### Струкура проекта:
Структура проекта построена на основе микросервисной архитектуре и включает в себя сервисы с методами:

1) Discovery service(Eureka Server)
2) Account service
   - добавление/удаление/обновление/получение пользователя(удаление другого пользователя только для администратора)
3) Messages service
   - Получение диалогов пользователя
   - Получение всех сообщений определённого диалога
   - Отправка сообщения
4) Post service
   - добавление/удаление/обновление/получение записи на странице пользователя
5) Search service 
   - Поиск пользователя
   - Просмотр истории поиска(для администратора)
   - Получение всех пользователей(для администратора)

***Схема структуры мискросервисов***
![image](https://user-images.githubusercontent.com/80100811/221851385-bbd737ca-34ad-4f7c-b586-fd4fb3af918a.png)

***Дополнительно подключен API Gateway с Load Balancer***
___
### Стек технологий
- Java 17
- JavaScript
- HTML5
- Spring Boot 3.0.4 (Spring Data JPA, Spring Security, Spring Boot Validation Starter, WebFlux)
- PostgreSQL 11
- Liquibase 4.1
- Docker 3.9
- Gradle 7.6
- Spring Cloud 2022.0.1 (Service discovery: Eureka Server; Gateway)
- Lombok 1.18.24
- Freemarker 2.3.31
- Jsonwebtoken 0.11.5
- Mapstruct 1.5.3.Final
- SockJS 0.3.4
- Stomp 2.3.3
___
### Порядок запуска сервисов
1. EurekaServerApplication (Service discovery)
2. AccountServerApplication, MessagesServerApplication, PostServerApplication, SearchServerApplication (Произвольно)
3. ApiGatewayApplication

### Дополнительно:
- Сделать пользователя с правами администратора нужно через ручное изменение роли в баззе данных.
- Функционал администратора доступен по пути /seacrh/admin
- Аутентификационный ключ для создания и проверки JWT токена хранитья в каждом сервисе в файле конфигурации application.yml в поле jwt.secret.refresh. Для создания нового ключа в AccountServerApplication в пакете jwt.util в классе GenerateKeys нужно запустить метод main.
